<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="icon" type="image/x-icon" href="../../assets/images/icon.png">
   
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;1,400;1,500;1,600&display=swap" rel="stylesheet">
   
        <link rel="stylesheet" href="../../assets/css/footer.css">
        <link rel="stylesheet" href="../../assets/css/style.css">
        <link rel="stylesheet" href="../../assets/css/user_profile.css">
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.2.1/css/fontawesome.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
        <title>User Profile Page</title>
    </head>
    <body>
     <main>
        <div  class="user-profile-details">
            <div class="address-container">
               
                    <div class="address-title">
                        <h2>Manage Addresses</h2>
                    </div>
                   <div class="user-addresses">
                    <!-- dynamic html here -->
                   </div>
               <div class="add-address-container">
                <div class="add-new-address">
                    <h3>
                        <p>+</p>ADD A NEW ADDRESS
                    </h3>
                </div>
               </div>

            </div>
            <div class="personal-information-container">
                <div class="personal-title">
                    <h1>Personal Information</h1>
                </div>
               <div class="information-container1">
                <div class="sub-information-details">
                    <h2 >
                        Name
                    </h2>
                    <p id="full_name1">
                      
                    </p>
                </div>
                <div class="sub-information-details">
                  <h2>
                    Your Gender
                  </h2>
                  <p id="gender"></p>
                </div>
                <div class="sub-information-details">
                   <h2>Email Address</h2>
                   <p id="email"></p>
                </div>
                <div class="sub-information-details">
                    <h2>Date of Birth</h2>
                    <p id="dobb"></p>
                 </div>
                <div class="sub-information-details">
                    <h2>
                        Phone Number
                    </h2>
                    <p id="mobile"></p>
                </div>
                
             
               </div>
               <div class="edit-delete">
                <div class="edit-profile">
                    <h3 >EDIT </h3>
                   </div>
                   <div class="del_account">
                    <h3 >DELETE </h3>
                   </div>
                </div>
                
               </div>
              
            </div>
       
     </main>


        <div class="create_pro">
            <a href="../user/product_form.html">
                <button>
                    Create new Product 
                </button>
            </a>
        </div>

        <!-- edit profile poppup -->

 

        <div class="edit-profile-details">
            <div class="fulledit">
            <div class="exit-icon">
                <img src="../../assets/images/cross-exit-symbol.jpg" alt="exit" class="close-profile-details">
            </div>
          <div class="edit-details-container">
            <div class="edit-title">
                <h2>Edit Personal Details</h2>
            </div>
            <div class="user-personal-details">
                <label for="edit-full-_name">Name</label>
                <input type="text" id="edit-full_name" maxlength="30" required>
            </div>
            <div class="user-personal-details">
                <label for="date-of-birth"> Date of Birth  </label>
                <input type="date" placeholder="date of birth" id="date-of-birth">
            </div>
            <div class="user-personal-details">
                <label for="edit-gender">Gender</label>
                <select  id="edit-gender">
                    <option value="Male">Male</option>
                    <option value="Female">Female</option>

                </select>
            </div>
            
          </div>
          <div class="user-details-save">
            <button id="save_data">Save</button>
          </div>
        </div>
    </div>



        <footer>
            <div class="footer1">
                <div class="img101">
                    <a href="../../index.html">
                        <img src="../../assets/images/Fert agri.png" alt="logo">
                    </a>
                </div>
                <div class="about111">
                    <div class="quick">
                        <h2>QUICK LINKS</h2>
                        <p>
                            <a href="./about_us.html">ABOUT US</a>
                        </p>
                        <p>
                            <a href="./wishlist.html">WISHLIST</a>
                        </p>
                        <p>
                            <a href="./offers.html">OFFERS</a>
                        </p>
                        <p>
                            <a href="./user_interface.html">HOME</a>
                        </p>
                    </div>
                    <div class="quick">
                        <h2>BRANDS</h2>
                        <p>
                            <a href="./dhanuka.html">DHANUKA</a>
                        </p>
                        <p>
                            <a href="./dow_agro.html">DOW AGRO SCIENCE</a>
                        </p>
                        <p>
                            <a href="./upl.html">UPL</a>
                        </p>
                        <p>
                            <a href="./tata.html"> TATA RALLIS</a>
                        </p>
                        <p>
                            <a href="./adama.html">ADAMA</a>
                        </p>
                        <p>
                            <a href="./bayer.html">BAYER</a>
                        </p>
                    </div>
                    <div class="quick">
                        <h2>CROP PROTECTION</h2>
                        <p>
                            <a href="./insecticides.html">BIO INSECTICIDES</a>
                        </p>
                        <p>
                            <a href="./fungicides.html">BIO FUNGICIDES</a>
                        </p>
                        <p>
                            <a href="./nematicides.html">BIO NEMATICIDES</a>
                        </p>
                        <p>
                            <a href="./viricides.html"> BIO VIRCIDES</a>
                        </p>
                    </div>
                    <div class="quick">
                        <h2>CONTACT US</h2>
                        <div class="rboomi">
                            <h3>EMAIL</h3>
                            <p> rboomibalan459@gmail.com</p>
                        </div>
                        <div class="rboomi">
                            <h3>PHONE</h3>
                            <p>+919629223356</p>
                        </div>
                        <div class="rboomi">
                            <h3>ADDRESS</h3>
                            <p> 1/115, Thirumurugan street, Mandumandram Nagar, Tiruchippalli-620021</p>
                        </div>
                    </div>
                </div>
                <div class="bottom">
                    <div class="cont">
                        <p>FOLLOW US</p>
                    </div>
                    <div class="social">
                        <a href="https://www.instagram.com/rp0803/?igshid=YmMyMTA2M2Y%3D">
                            <img src="../../assets/images/instagram.png" alt="instagram">
                        </a>
                        <a href="https://www.youtube.com/channel/UCufA2FcZ-8DSsbCog424g_g">
                            <img src="../../assets/images/youtube.webp" alt="youtube">
                        </a>
                        <a href="https://myaccount.google.com/?utm_source=OGB&tab=rk&utm_medium=app">
                            <img src="../../assets/images/mail.jpg" alt="email">
                        </a>
                        <a href="https://twitter.com/agrigoi?lang=en">
                            <img src="../../assets/images/twiter.png" alt="twitter">
                        </a>
                        <a href="https://www.facebook.com/people/Agriculture/100068310005265/">
                            <img src="../../assets/images/facebook.png" alt="facebook">
                        </a>
                        <a href="#">
                            <img src="../../assets/images/whatsapp.webp" alt="whatsapp">
                        </a>
    
                    </div>
                </div>
            </div>
        </footer>
        <div class="mobile_footer">
            <div class="mobile_aboutus">
                <a href="./user_interface.html">Home</a>
                <a href="about_us.html">
                    <p>About Us</p>
                </a>
                <p>(+91)9629223356</p>
        
            </div>
            <div class="copyright">
                <p> Copyright Â© 2021 - 2023 FAB - Designed By </p>
                <span>Boobalan-R</span>
            </div>
            <div class="mobile_social">
                <p>Contact Us</p>
                <div>
                    <a href="https://twitter.com/agrigoi?lang=en">
                        <img src="../../assets/images/twiter.png" alt="twitter">
                    </a>
                    <a href="https://www.youtube.com/channel/UCufA2FcZ-8DSsbCog424g_g">
                        <img src="../../assets/images/youtube.webp" alt="youtube">
                    </a>
                    <a href="https://www.facebook.com/people/Agriculture/100068310005265/">
                        <img src="../../assets/images/facebook.png" alt="facebook">
                    </a>
                </div>
            </div>
        </div>

        <!-- <script src="../js/menubar.js"></script> -->
        <script src="../js/header.js"></script>
        <script src="../js/search.js"></script>
        <script src="../js/user_profile.js"></script>

 
            <script>
            
            // Define an empty array to store addresses
let addresses = JSON.parse(localStorage.getItem('addresses')) || [];

// get logged user id
let userUnique = JSON.parse(localStorage.getItem('user_data')) || [];

const matchedAddress = addresses.filter(data => data.userUnique === userUnique);
console.log(matchedAddress)


// have to create logged users gaved addresses
for(let i=0; i<matchedAddress.length; i++) {
    
// create a new address div
const addressDiv = document.createElement("div");
addressDiv.classList.add("single-address");

// add home container
const homeContainer = document.createElement("div");
homeContainer.classList.add("home-container");
const homeHeading = document.createElement("h3");
homeHeading.textContent = matchedAddress[i]["title"];
homeContainer.appendChild(homeHeading);
addressDiv.appendChild(homeContainer);

// add address details
const addressDetails1 = document.createElement("div");
addressDetails1.classList.add("address-details");
const addressLine1 = document.createElement("p");
addressLine1.textContent = matchedAddress[i]["street"];
addressDetails1.appendChild(addressLine1);
addressDiv.appendChild(addressDetails1);

const addressDetails2 = document.createElement("div");
addressDetails2.classList.add("address-details");
const addressLine2 = document.createElement("p");
addressLine2.textContent = matchedAddress[i]["location"];
addressDetails2.appendChild(addressLine2);
addressDiv.appendChild(addressDetails2);

const addressDetails3 = document.createElement("div");
addressDetails3.classList.add("address-details");
const addressLine3 = document.createElement("p");
addressLine3.textContent = `${matchedAddress[i]["city"]} - ${matchedAddress[i]["pincode"]}`;
addressDetails3.appendChild(addressLine3);
addressDiv.appendChild(addressDetails3);

const addressDetails4 = document.createElement("div");
addressDetails4.classList.add("address-details");
const addressLine4 = document.createElement("p");
addressLine4.textContent = matchedAddress[i]["state"];
addressDetails4.appendChild(addressLine4);
addressDiv.appendChild(addressDetails4);

const addressDetails5 = document.createElement("div");
addressDetails5.classList.add("address-details", "details-mobile");
const addressLine5 = document.createElement("p");
addressLine5.textContent = `Mobile Number - ${matchedAddress[i]["mobile"]}`;
addressDetails5.appendChild(addressLine5);
addressDiv.appendChild(addressDetails5);

// add edit/remove buttons
const editA = document.createElement("a");
editA.setAttribute("href",`./edit-address.html?addressId=${matchedAddress[i]["addressId"]}`);

const editRemoveDiv = document.createElement("div");
editRemoveDiv.classList.add("edit-remove");
const editButton = document.createElement("p");
editButton.id = "address-edit";
editButton.textContent = "EDIT";
const removeButton = document.createElement("button");
removeButton.id = "address-remove";
removeButton.textContent = "REMOVE";
removeButton.setAttribute('data_set', matchedAddress[i].addressId);


// Loop through the remove buttons and attach click event listener to each
removeButton.addEventListener('click', function() {
     // Show a confirmation dialog box
  const confirmed = confirm(
    "Are you sure you want to remove this address from your addresses list?"
  );
if(confirmed){
      // Get the current addressId from this cart
  const addressId = this.getAttribute('data_set');

   // Find the index of the address to remove
  const addressIndex = addresses.findIndex((item) => item.addressId === addressId);
  
      // Remove the address from the addresses list
  addresses.splice(addressIndex, 1);

  
    // Update the addresses in local storage
    localStorage.setItem("addresses", JSON.stringify(addresses));
     // Refresh the page to update the address display
     window.location.reload();
}
});


editRemoveDiv.appendChild(editA);
editA.appendChild(editButton);
editRemoveDiv.appendChild(removeButton);
addressDiv.appendChild(editRemoveDiv);

// add address div to container
document.querySelector("div.user-addresses").append(addressDiv);
}

document.querySelector(".add-new-address").addEventListener("click",()=>{
    window.location.href="./edit-address.html"
 });




            </script>

    </body>
</html>
