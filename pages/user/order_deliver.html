<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" /><link rel="icon" type="image/x-icon" href="../../assets/images/icon.png">
   
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lora:ital,wght@0,400;0,500;0,600;1,400;1,500;1,600&display=swap" rel="stylesheet">
   

    <link rel="stylesheet" href="../../assets/css/footer.css">
    <link rel="stylesheet" href="../../assets/css/header.css">
    <link rel="stylesheet" href="../../assets/css/style.css">
    <link rel="stylesheet" href="../../assets/css/order_deliver.css">


    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <title>delivery detasils</title>
</head>

<body>
    <div class="header">
       <ul>
        <li class="hero_list"><a href="../seller/seller_singup.html">Sell on Fert Agri Boomi</a></li>
       </ul>
    </div>
    <header>
        <!-- // menu bar -->
    <div class="search_menu">
        <div class="menu_bar1">
            <img src="../../assets/images/Fert agri.png" alt="logo for fert agri boomi" class="header__logo1" />
           <a href="#" class="btn_bar">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
           </a>
        </div>
        <div class="search_bar1">
            <button class="sear_btn1" type="submit"><i class="fa fa-search"></i></button>
            <input  class="input00" type="text" placeholder="Search....">
        </div>
    </div>
    <!-- --------------menu bar end -------------------- -->

    <div class="head">
        <div>
            <img src="../../assets/images/Fert agri.png" alt="logo for fert agri boomi" class="header__logo" />
    </div>
    
    <div class="search_bar">
        <button class="sear_btn" type="submit"><i class="fa fa-search"></i></button>
        <input  class="input0" type="text" placeholder="Search....">
    </div>

        <!-- search bar end -->
            <div class="navbar_links">
                    <ul class="hero">
                     <li class="hero_list1"><a href="../user/wishlist.html"><i id="wish" class="fa fa-heart" style="font-size:21px"></i>Wishlist</a> </li>
                    <li class="hero_list1"><a href="../user/user_order.html">My orders</a>
                    </li>
                <li  class="hero_list1"><a href="./add_cart.html"><i id="cart" class="fa fa-shopping-cart" style="font-size:26px"></i> Cart</a></li>
                <li class="hero_list1"><a href="../../index.html"><i class="fa fa-sign-out" style="font-size:21px"></i>Logout</a>
                </li>
                <a href="./user_profile.html" ><img class="img1" src="../../assets/images/profile in.jpg" alt="profile" width="35px" height="35px"></a>
                </ul>
            </div>
        </div>   
    </header>
    <div class="nav">
        <a href="./user_interface.html"><button class="btn1">HOME</button></a>
        <div class="dropdown">
            <button class="dropbtn">BRANDS</button>
            <div class="dropdown-content">
                <a href="./dhanuka.html">DHANUKA</a>
                <a href="./dow_agro.html">DOW AGRO SCIENCE</a>
                <a href="./upl.html">UPL</a>
                <a href="./tata.html">TATA RALLIS</a>
                <a href="adama.html">ADAMA</a>
                <a href="./bayer.html">BAYER</a>
                <a href="./upl.html">ARIES AGRO</a>
                <a href="./promoters.html">BARRIX</a>
               <a href="./bio_fertilizer.html">INDOFIL</a>
               <a href="./tata.html">RINUJA</a>
            </div>
        </div>
        <div class="dropdown1">
            <button class="dropbtn1">CROP PROTECTION</button>
            <div class="dropdown1-content">
                <a href="./insecticides.html">BIO INSECTICIDES</a>
                <a href="./fungicides.html">BIO FUNGICIDES</a>
                <a href="./nematicides.html">BIO NEMATICIDES</a>
                <a href="viricides.html"> BIO VIRCIDES</a>
            </div>
        </div>
        <div  class="dropdown2">
             <button class="dropbtn2" > CROP NUTRITION</button>
            <div class="dropdown2-content">
                <a href="./major_nutrients.html">MAJOR NUTRIENTS</a>
                <a href="./secodary_nutrients.html">SECONDARY NUTRIENTS</a>
                <a href="./promoters.html">GROWTH PROMOTERS</a>
                <a href="./retardants.html">GROWTH RETARDANTS</a>
                <a href="./organic.html">ORGANIC FERTILIZERS</a>
                <a href="./bio_fertilizer.html">BIO FERTILIZERS</a>
                <a href="./secodary_nutrients.html">ANTI STRESSING AGENTS</a>
                <a href="./viricides.html">MICRO NUTRIENTS</a>
            </div>
        </div>
</div>
<main>
   
    <div class="fert10">
        <!-- <div class="fert12">
            <img src="../../assets/images/Adama/ada1.avif" alt="order Status">
        </div>
        <div class="fert01">
            <h2>AGIL HERBICIDE</h2>
              
                <div class="fert14">
                 <p>Price: ₹835</p>
                </div>
                <div class="fert5">
                    <h3>Order Qty:</h3><p>2</p>
                  </div>       
                  <div class="fert16">
                    <h3> Delivery Status:</h3><p>Completed.</p>
                  </div>
                  <div class="fert116">
                    <h3>Date:</h3><p>15/08/2022</p>
                </div>
                  <div class="address1">
                    <h3>Delivery address:</h3><p>R. VASUDEVAN (PRESIDENT)

                        No. 1, New Bangaru Naidu Colony,
                        
                        K.K. Nagar (West), Chennai - 600078.</p>
                  </div>
        
    </div> -->
    </div>
    <div class="order_show">
        <img src="../../assets/images/order_delicver-transformed.jpeg" alt="ordered image">
    </div>
</main>

<div class="mobile_footer">
    <div class="mobile_aboutus">
    <a href="./user_interface.html">Home</a>
    <a href="about_us.html"><p>About Us</p></a>
          <p>(+91)9629223356</p>
        
    </div>
     <div class="copyright">
      <p> Copyright © 2021 - 2023 FAB - Designed By </p><span>Boobalan-R</span>
  </div>
  <div class="mobile_social">
    <p>Contact Us</p>
    <div>
    <a href="https://twitter.com/agrigoi?lang=en"><img src="../../assets/images/twiter.png" alt="twitter"></a>
    <a href="https://www.youtube.com/channel/UCufA2FcZ-8DSsbCog424g_g" ><img src="../../assets/images/youtube.webp" alt="youtube"></a>
    <a href="https://www.facebook.com/people/Agriculture/100068310005265/" ><img src="../../assets/images/facebook.png" alt="facebook"></a>
  </div>
  </div>
  </div>
<script src="../js/menubar.js"></script>
<script>
    //  <div class="fert12">
    //         <img src="../../assets/images/Adama/ada1.avif" alt="order Status">
    //     </div>

    const productUniqueId = new URLSearchParams(window.location.search).get("orderDetails");
   const orderedProducts  = JSON.parse(localStorage.getItem("addtoCartDeliveryProduct"))
   const getProductDetails = orderedProducts.find(details=>
   details.orderUniqueId == productUniqueId);
   
    div_fert12 = document.createElement("div");
    div_fert12.setAttribute("class", "fert12");
    document.querySelector(".fert10").appendChild(div_fert12);

    div_fert12_img = document.createElement("img");
    div_fert12_img.setAttribute("src", getProductDetails["productImage"]);
    div_fert12_img.setAttribute("alt", getProductDetails["productName"]);
    div_fert12.append(div_fert12_img);

   // <div class="fert01"></div>
   div_fert101 = document.createElement("div");
   div_fert101.setAttribute("class", "fert01");
   document.querySelector(".fert10").appendChild(div_fert101);

//    <h2>------------</h2>
   fert101_h2 = document.createElement("h2");
   fert101_h2.innerText =  getProductDetails["productName"];
   div_fert101.append(fert101_h2);

   // <div class="fert14">
   // <p>Price: ₹835</p>  </div>
   div_fert14 = document.createElement("div");
   div_fert14.setAttribute("class", "fert14");
   div_fert101.appendChild(div_fert14);
   
   fert14_p = document.createElement("p");
   fert14_p.innerText="Price:" + getProductDetails["productCurrentPrice"];
   div_fert14.append(fert14_p);

   //  <div class="fert5">
   // <h3>Order Qty:</h3><p>2</p>  </div>    
   div_fert5 = document.createElement("div");
   div_fert5.setAttribute("class", "fert5");
   div_fert101.appendChild(div_fert5);

   fert5_h3 = document.createElement("h3");
   fert5_h3.innerText = "Order Quantity: " ;
   div_fert5.append(fert5_h3);

   
   fert5_p = document.createElement("p");
   fert5_p.innerText=getProductDetails["proQuantity"];
   div_fert5.append(fert5_p);

   //<div class="fert16">
   // <h3> Delivery Status:</h3><p>Completed.</p>
   
   div_fert16 = document.createElement("div");
   div_fert16.setAttribute("class", "fert16");
   div_fert101.appendChild(div_fert16);

   fert16_h3 = document.createElement("h3");
   fert16_h3.innerText = " Delivery Status:";
   div_fert16.append(fert16_h3);

   
   fert16_p = document.createElement("p");
   fert16_p.innerText=getProductDetails["orderStatus"];
   div_fert16.append(fert16_p);
   
   function formatDate(date) {
  var d = new Date(date),
    month = '' + (d.getMonth() + 1),
    day = '' + d.getDate(),
    year = d.getFullYear();

  if (month.length < 2) month = '0' + month;
  if (day.length < 2) day = '0' + day;

  return [day, month, year].join('-');
}
const currentDate = new Date();
const day = String(currentDate.getDate()).padStart(2, '0');
const month = String(currentDate.getMonth() + 1).padStart(2, '0');
const year = currentDate.getFullYear();
const formattedDate = `${day}/${month}/${year}`;



   const deliverydate = getProductDetails["deliveryDate"];
//  if(deliverydate == formattedDate){
//     fert16_p.innerText = "Completed";
//  }
//  else{
//     fert16_p.innerText = "Processing"
//  }


  // <div class="fert116">
      //              <h3>Date:</h3><p>15/08/2022</p> </div>>    
      div_fert1116 = document.createElement("div");
   div_fert1116.setAttribute("class", "fert116");
   div_fert101.appendChild(div_fert1116);

   fert1116_h3 = document.createElement("h3");
   fert1116_h3.innerText = "Ordered date: ";
   div_fert1116.append(fert1116_h3);

   
   fert1116_p = document.createElement("p");
   fert1116_p.innerText= getProductDetails["orderDate"];
   div_fert1116.append(fert1116_p);


   div_fert116 = document.createElement("div");
   div_fert116.setAttribute("class", "fert116");
   div_fert101.appendChild(div_fert116);

   fert116_h3 = document.createElement("h3");
   fert116_h3.innerText = "Delivery date: ";
   div_fert116.append(fert116_h3);

   
   fert116_p = document.createElement("p");
   fert116_p.innerText= deliverydate;
   div_fert116.append(fert116_p);

 //  <div class="address1">
        //            <h3>Delivery address:</h3><p>R. VASUDEVAN (PRESIDENT)</p> </div>
        div_fert117 = document.createElement("div");
   div_fert117.setAttribute("class", "address1");
   div_fert101.appendChild(div_fert117);

   fert117_h3 = document.createElement("h3");
   fert117_h3.innerText = "Delivery address: ";
   div_fert117.append(fert117_h3);

   
   fert117_p = document.createElement("p");
   fert117_p.innerText= getProductDetails["address"];
   div_fert117.append(fert117_p);


   // <div class="cancel_order"><button type="submit">Cancel order</button></div>


    div_cancel_order = document.createElement("div");
   div_cancel_order.setAttribute("class", "cancel_order");
   div_fert101.appendChild(div_cancel_order);

   back_button = document.createElement("button");
   back_button.setAttribute("id", "back");
   back_button.setAttribute("type", "button");
   back_button.innerText="back";
   div_cancel_order.append(back_button);

   cancel_button = document.createElement("button");
   cancel_button.setAttribute("id", "cancel");
   cancel_button.setAttribute("type", "submit");
   cancel_button.innerText="Cancel order";
   div_cancel_order.append(cancel_button);




document.getElementById("back").addEventListener("click", 
function backHome(){
    location.href = "http://127.0.0.1:5500/pages/user/user_order.html";
}
);

if(formattedDate < deliverydate){
    document.getElementById("cancel").addEventListener("click",
function cancelOrder(){
    const confirmed = confirm("Are you sure you want to cancel this order?");
    if(confirmed){
        const orderSts = "Cancelled";
         getProductDetails["orderStatus"] = orderSts;
         localStorage.setItem("addtoCartDeliveryProduct",JSON.stringify(orderedProducts))

        location.href = "http://127.0.0.1:5500/pages/user/user_order.html";
    }
})
}
else{
    cancel_button.style.display = "none";
}

// Incase user want to cancell the order that status have to update for Cancelled
if(getProductDetails["orderStatus"] == "Cancelled"){
    cancel_button.style.display = "none";
}

// after delivered product order status has been changed "Delivered"


if(formattedDate > deliverydate){
    fert16_p.innerText= "Delivered"
}
</script>
</body>
</html>
